{% extends "base.html" %}

{% block title %}GerÃ¤te - KI Smart Home{% endblock %}

{% block content %}
<div class="devices-page">
    <h2>GerÃ¤te-Ãœbersicht</h2>

    <!-- Statistiken -->
    <div class="card">
        <h3>ğŸ“Š GerÃ¤te-Statistiken</h3>
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-value" id="total-devices">0</div>
                <div class="stat-label">GerÃ¤te gesamt</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="lights-count">0</div>
                <div class="stat-label">ğŸ’¡ Lichter</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="switches-count">0</div>
                <div class="stat-label">ğŸ”Œ Schalter</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="climate-count">0</div>
                <div class="stat-label">ğŸŒ¡ï¸ Klima</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="sensors-count">0</div>
                <div class="stat-label">ğŸ“Š Sensoren</div>
            </div>
        </div>
    </div>

    <!-- Suche und Filter -->
    <div class="card">
        <h3>ğŸ” Suche & Filter</h3>
        <div class="search-filter-section">
            <input type="text" id="device-search" placeholder="GerÃ¤t suchen (Name, Raum, Typ)..." class="search-input">

            <div class="filter-controls">
                <label>Nach Typ filtern:</label>
                <div class="filter-buttons">
                    <button class="filter-btn active" data-filter="all">Alle</button>
                    <button class="filter-btn" data-filter="light">ğŸ’¡ Licht</button>
                    <button class="filter-btn" data-filter="climate">ğŸŒ¡ï¸ Klima</button>
                    <button class="filter-btn" data-filter="switch">ğŸ”Œ Schalter</button>
                    <button class="filter-btn" data-filter="sensor">ğŸ“Š Sensoren</button>
                </div>
            </div>

            <div class="view-toggle">
                <label>Ansicht:</label>
                <button class="view-btn active" data-view="grid">
                    <span>ğŸ”² Kacheln</span>
                </button>
                <button class="view-btn" data-view="list">
                    <span>ğŸ“‹ Liste</span>
                </button>
                <button class="view-btn" data-view="rooms">
                    <span>ğŸ  Nach RÃ¤umen</span>
                </button>
            </div>
        </div>
    </div>

    <!-- GerÃ¤te-Anzeige -->
    <div class="card">
        <div class="card-header-with-actions">
            <h3 id="devices-section-title">Alle GerÃ¤te</h3>
            <button class="btn btn-small btn-secondary" id="refresh-devices">ğŸ”„ Aktualisieren</button>
        </div>

        <div id="devices-container" class="devices-display">
            <!-- GerÃ¤te werden hier dynamisch geladen -->
            <div class="loading">Lade GerÃ¤te...</div>
        </div>
    </div>

    <!-- Schnellaktionen -->
    <div class="card">
        <h3>âš¡ Schnellaktionen</h3>
        <div class="quick-actions">
            <button class="btn btn-primary" id="all-lights-on">ğŸ’¡ Alle Lichter Ein</button>
            <button class="btn btn-secondary" id="all-lights-off">Alle Lichter Aus</button>
            <button class="btn btn-secondary" id="all-switches-off">ğŸ”Œ Alle Schalter Aus</button>
        </div>
        <div id="quick-action-result" class="action-result"></div>
    </div>
</div>

<!-- Device Control Modal -->
<div id="device-modal" class="modal">
    <div class="modal-content modal-large">
        <span class="close">&times;</span>
        <div class="device-modal-header">
            <h3 id="modal-device-name">GerÃ¤t</h3>
            <div class="device-modal-meta">
                <span id="modal-device-type" class="badge"></span>
                <span id="modal-device-zone" class="device-zone"></span>
            </div>
        </div>
        <div class="device-modal-body">
            <div class="device-current-state">
                <h4>Aktueller Status</h4>
                <div id="modal-device-state"></div>
            </div>
            <div class="device-controls-section">
                <h4>Steuerung</h4>
                <div id="modal-device-controls"></div>
            </div>
        </div>
    </div>
</div>

<script src="{{ url_for('static', filename='js/devices.js') }}"></script>
{% endblock %}
